"use strict";var W=Object.create;var w=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var L=(e,t)=>{for(var n in t)w(e,n,{get:t[n],enumerable:!0})},p=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of R(t))!S.call(e,s)&&s!==n&&w(e,s,{get:()=>t[s],enumerable:!(o=M(t,s))||o.enumerable});return e};var y=(e,t,n)=>(n=e!=null?W(O(e)):{},p(t||!e||!e.__esModule?w(n,"default",{value:e,enumerable:!0}):n,e)),D=e=>p(w({},"__esModule",{value:!0}),e);var q={};L(q,{activate:()=>B,deactivate:()=>F});module.exports=D(q);var E=y(require("path")),i=y(require("vscode"));var k={},f,b=0,d=null;function g(){return(d===null||d.byteLength===0)&&(d=new Uint8Array(f.memory.buffer)),d}var u=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},j=typeof u.encodeInto=="function"?function(e,t){return u.encodeInto(e,t)}:function(e,t){let n=u.encode(e);return t.set(n),{read:e.length,written:n.length}};function m(e,t,n){if(n===void 0){let c=u.encode(e),a=t(c.length,1)>>>0;return g().subarray(a,a+c.length).set(c),b=c.length,a}let o=e.length,s=t(o,1)>>>0,l=g(),r=0;for(;r<o;r++){let c=e.charCodeAt(r);if(c>127)break;l[s+r]=c}if(r!==o){r!==0&&(e=e.slice(r)),s=n(s,o,o=r+e.length*3,1)>>>0;let c=g().subarray(s+r,s+o),a=j(e,c);r+=a.written,s=n(s,o,r,1)>>>0}return b=r,s}var _=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&_.decode();function C(e,t){return e=e>>>0,_.decode(g().subarray(e,e+t))}function h(e,t){let n,o;try{let s=m(e,f.__wbindgen_malloc,f.__wbindgen_realloc),l=b,r=m(t,f.__wbindgen_malloc,f.__wbindgen_realloc),c=b,a=f.filter_logs(s,l,r,c);return n=a[0],o=a[1],C(a[0],a[1])}finally{f.__wbindgen_free(n,o,1)}}async function P(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(o){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function U(){let e={};return e.wbg={},e.wbg.__wbindgen_init_externref_table=function(){let t=f.__wbindgen_export_0,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e}function I(e,t){return f=e.exports,x.__wbindgen_wasm_module=t,d=null,f.__wbindgen_start(),f}async function x(e){if(f!==void 0)return f;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("logpro_bg.wasm",k.url));let t=U();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));let{instance:n,module:o}=await P(await e,t);return I(n,o)}var v=x;function B(e){console.log('\u2705 Extension "raotalha-logpro" is now active!');let t=i.commands.registerCommand("raotalha-logpro.filterLogs",async()=>{let n=i.window.activeTextEditor;if(!n){i.window.showErrorMessage("\u274C No active editor with a file open.");return}let s=n.document.uri.fsPath.split(".").pop()?.toLowerCase()??"";if(!["log","txt"].includes(s)){i.window.showErrorMessage("\u26A0\uFE0F This extension only supports .log and .txt files.");return}try{console.log("\u{1F4E5} Loading WASM module...");let l=i.Uri.file(E.join(e.extensionPath,e.extensionMode===i.ExtensionMode.Development?"src/wasm":"dist","logpro_bg.wasm")),r=await i.workspace.fs.readFile(l);await v(r);let c=n.document.getText(),a=await i.window.showInputBox({prompt:"\u{1F50D} Enter search string (leave blank to show all)",placeHolder:"e.g., ERROR, 404, etc."}),T=a?h(c,a):c,A=await i.workspace.openTextDocument({content:T,language:"log"});await i.window.showTextDocument(A,i.ViewColumn.Beside),console.log("\u2705 Filtered log displayed.")}catch(l){console.error("\u274C Error in filterLogs:",l),i.window.showErrorMessage(`Error filtering logs: ${l.message||l}`)}});e.subscriptions.push(t)}function F(){console.log("\u{1F6D1} Extension deactivated.")}0&&(module.exports={activate,deactivate});
